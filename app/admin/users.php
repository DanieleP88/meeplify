&lt;?php\n$content = '\n&lt;h1&gt;User Management&lt;/h1&gt;\n&lt;input type=\"text\" id=\"user-search\" placeholder=\"Search by email\"&gt;\n&lt;table id=\"users-table\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;ID&lt;/th&gt;\n            &lt;th&gt;Email&lt;/th&gt;\n            &lt;th&gt;Role&lt;/th&gt;\n            &lt;th&gt;Active&lt;/th&gt;\n            &lt;th&gt;Created&lt;/th&gt;\n            &lt;th&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;div id=\"pagination\"&gt;&lt;/div&gt;\n&lt;script&gt;\nfunction loadUsers(page = 1) {\n    const search = document.getElementById(\"user-search\").value;\n    fetch(`/api/admin/users?page=${page}&search=${search}`, {\n        headers: {\"X-CSRF-TOKEN\": csrf}\n    }).then(res =&gt; res.json()).then(resp =&gt; {\n        if (resp.success) {\n            const tbody = document.querySelector(\"#users-table tbody\");\n            tbody.innerHTML = \"\";\n            resp.data.users.forEach(user =&gt; {\n                const tr = document.createElement(\"tr\");\n                tr.innerHTML = `\n                    &lt;td&gt;${user.id}&lt;/td&gt;\n                    &lt;td&gt;${user.email}&lt;/td&gt;\n                    &lt;td&gt;${user.role}&lt;/td&gt;\n                    &lt;td&gt;${user.active ? \"Yes\" : \"No\"}&lt;/td&gt;\n                    &lt;td&gt;${user.created_at}&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;button onclick=\"toggleActive(${user.id}, ${user.active})\"&gt;${user.active ? \"Disable\" : \"Reactivate\"}&lt;/button&gt;\n                        &lt;button onclick=\"gdprExport(${user.id})\"&gt;GDPR Export&lt;/button&gt;\n                        &lt;button onclick=\"deleteUser(${user.id})\"&gt;Delete&lt;/button&gt;\n                    &lt;/td&gt;\n                `;\n                tbody.appendChild(tr);\n            });\n            // pagination logic\n        }\n    });\n}\n\nfunction toggleActive(id, active) {\n    const action = active ? \"disable\" : \"reactivate\";\n    if (confirm(`Are you sure to ${action} this user?`)) {\n        fetch(`/api/admin/users/${id}/${action}`, {\n            method: \"PUT\",\n            headers: {\"X-CSRF-TOKEN\": csrf}\n        }).then(res =&gt; res.json()).then(resp =&gt; {\n            if (resp.success) loadUsers();\n        });\n    }\n}\n\nfunction deleteUser(id) {\n    if (confirm(\"Are you sure to delete this user?\")) {\n        fetch(`/api/admin/users/${id}`, {\n            method: \"DELETE\",\n            headers: {\"X-CSRF-TOKEN\": csrf}\n        }).then(res =&gt; res.json()).then(resp =&gt; {\n            if (resp.success) loadUsers();\n        });\n    }\n}\n\nfunction gdprExport(id) {\n    fetch(`/api/admin/users/${id}/export`, {\n        headers: {\"X-CSRF-TOKEN\": csrf}\n    }).then(res =&gt; res.json()).then(resp =&gt; {\n        if (resp.success) {\n            const data = JSON.stringify(resp.data);\n            const blob = new Blob([data], {type: \"application/json\"});\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement(\"a\");\n            a.href = url;\n            a.download = `user_${id}_gdpr.json`;\n            a.click();\n        }\n    });\n}\nloadUsers();\ndocument.getElementById(\"user-search\").addEventListener(\"input\", () =&gt; loadUsers());\n&lt;/script&gt;\n';\nrequire_once __DIR__ . '/../views/admin_shell.php';\n?&gt;